<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Production - Documentation</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <nav>
            <div class="logo">
                <img src="https://indignonsnous.fr/global/img/logo-inbt.svg" alt="Indignons-nous Bloquons tout" />
                <span>Dev Tools</span>
            </div>
            <ul class="nav-links">
                <li><a href="index.html">Accueil</a></li>
                <li><a href="installation.html">Installation</a></li>
                <li><a href="developpement.html">DÃ©veloppement</a></li>
                <li><a href="docker.html">Docker</a></li>
                <li><a href="production.html" class="active">Production</a></li>
                <li><button id="theme-toggle" class="theme-btn">â˜€ï¸</button></li>
            </ul>
            <div class="hamburger" onclick="toggleMenu()">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </nav>
    </header>

    <main>
        <div class="content">
            <h1>DÃ©ploiement en production</h1>
            
            <p>Le script de production prÃ©pare automatiquement votre projet pour le dÃ©ploiement en configurant les fichiers SSI et en nettoyant les ressources de dÃ©veloppement.</p>

            <h3>PrÃ©paration pour la production</h3>
            <div class="code-block">
                <pre><code># Donner les permissions d'exÃ©cution (si nÃ©cessaire)
chmod +x dev/prod.sh

# PrÃ©parer pour la production
./dev/prod.sh</code></pre>
            </div>

            <div class="alert alert-success">
                <strong>âœ… Automatisation complÃ¨te :</strong> Le script prod.sh configure automatiquement le menu SSI, les fichiers .htaccess et nettoie les ressources de dÃ©veloppement.
            </div>

            <h3>Modifications apportÃ©es par le script</h3>
            
            <h4>Configuration SSI</h4>
            <ul>
                <li>ğŸ”§ <strong>Menu SSI</strong> : Remplacement du menu de dÃ©veloppement par le menu SSI de production</li>
                <li>ğŸ“ <strong>Includes</strong> : Configuration des Server-Side Includes pour Apache</li>
                <li>âš™ï¸ <strong>.htaccess</strong> : Restauration de la configuration Apache de production</li>
            </ul>

            <h4>Nettoyage des fichiers</h4>
            <ul>
                <li>ğŸ—‘ï¸ <strong>Fichiers de dÃ©veloppement</strong> : Suppression ou masquage des outils de dev</li>
                <li>ğŸ”’ <strong>SÃ©curitÃ©</strong> : Configuration des rÃ¨gles de sÃ©curitÃ© Apache</li>
                <li>ğŸ“¦ <strong>Optimisation</strong> : PrÃ©paration des fichiers pour la production</li>
            </ul>

            <h3>Structure de production</h3>
            <p>AprÃ¨s exÃ©cution du script de production, votre projet aura la structure suivante :</p>
            
            <div class="code-block">
                <pre><code>â”œâ”€â”€ index.html              # Page d'accueil (menu SSI activÃ©)
â”œâ”€â”€ global/                 # Ressources partagÃ©es
â”‚   â”œâ”€â”€ global.css         # Styles globaux
â”‚   â”œâ”€â”€ ssi/               # Includes SSI
â”‚   â””â”€â”€ ...
â”œâ”€â”€ local/                  # Personnalisations locales
â”œâ”€â”€ src/                    # Scripts PHP (si nÃ©cessaires)
â”œâ”€â”€ .htaccess              # Configuration Apache de production
â””â”€â”€ favicon.ico            # IcÃ´ne du site

# Dossiers ignorÃ©s/masquÃ©s en production :
â”œâ”€â”€ dev/                   # Outils de dÃ©veloppement (ignorÃ©s)
â”œâ”€â”€ docker/                # Configuration Docker (ignorÃ©e)
â””â”€â”€ docs/                  # Documentation (ignorÃ©e)</code></pre>
            </div>

            <h3>Configuration Apache (.htaccess)</h3>
            <p>Le fichier .htaccess de production inclut :</p>
            
            <h4>SÃ©curitÃ©</h4>
            <ul>
                <li>ğŸ›¡ï¸ <strong>Protection des dossiers sensibles</strong> (dev/, docker/, src/)</li>
                <li>ğŸ”’ <strong>Masquage des fichiers de configuration</strong></li>
                <li>ğŸš« <strong>Blocage des accÃ¨s non autorisÃ©s</strong></li>
            </ul>

            <h4>Performance</h4>
            <ul>
                <li>âš¡ <strong>Compression gzip</strong> pour les fichiers statiques</li>
                <li>ğŸ“¦ <strong>Cache des ressources</strong> (CSS, JS, images)</li>
                <li>ğŸ”„ <strong>Redirections optimisÃ©es</strong></li>
            </ul>

            <h4>SSI (Server-Side Includes)</h4>
            <ul>
                <li>ğŸ“„ <strong>Activation des includes</strong> pour les fichiers .html</li>
                <li>ğŸ”§ <strong>Configuration des directives SSI</strong></li>
                <li>âš™ï¸ <strong>Gestion des erreurs SSI</strong></li>
            </ul>

            <h3>DÃ©ploiement sur serveur</h3>
            
            <h4>PrÃ©requis serveur</h4>
            <ul>
                <li><strong>Apache</strong> avec mod_rewrite activÃ©</li>
                <li><strong>PHP</strong> (si utilisation des scripts de gÃ©nÃ©ration)</li>
                <li><strong>Support SSI</strong> (Server-Side Includes) activÃ©</li>
            </ul>

            <h4>MÃ©thodes de dÃ©ploiement</h4>
            
            <h5>1. FTP/SFTP</h5>
            <div class="code-block">
                <pre><code># AprÃ¨s avoir exÃ©cutÃ© ./dev/prod.sh
# TransfÃ©rer tous les fichiers sauf :
# - dev/
# - docker/
# - docs/
# - .git/</code></pre>
            </div>

            <h5>2. Git (recommandÃ©)</h5>
            <div class="code-block">
                <pre><code># Sur le serveur
git clone https://github.com/10s25/dev_local.git
cd dev_local

# PrÃ©parer pour la production
chmod +x dev/prod.sh
./dev/prod.sh</code></pre>
            </div>

            <h5>3. Rsync</h5>
            <div class="code-block">
                <pre><code># Synchronisation avec exclusions
rsync -avz --exclude='dev/' --exclude='docker/' --exclude='docs/' \
      --exclude='.git/' ./ user@server:/path/to/website/</code></pre>
            </div>

            <h3>VÃ©rifications post-dÃ©ploiement</h3>
            
            <h4>Tests Ã  effectuer</h4>
            <ol>
                <li>âœ… <strong>AccÃ¨s au site</strong> : VÃ©rifier que le site se charge correctement</li>
                <li>âœ… <strong>Menu SSI</strong> : VÃ©rifier que le menu s'affiche (pas de conditions de dÃ©veloppement)</li>
                <li>âœ… <strong>Includes SSI</strong> : VÃ©rifier que tous les includes fonctionnent</li>
                <li>âœ… <strong>SÃ©curitÃ©</strong> : Tester l'accÃ¨s aux dossiers protÃ©gÃ©s (dev/, docker/)</li>
                <li>âœ… <strong>Performance</strong> : VÃ©rifier la compression et le cache</li>
            </ol>

            <h4>Outils de test</h4>
            <div class="code-block">
                <pre><code># Test de compression
curl -H "Accept-Encoding: gzip" -I http://votre-site.com/

# Test de sÃ©curitÃ©
curl -I http://votre-site.com/dev/
curl -I http://votre-site.com/docker/

# Test SSI
curl http://votre-site.com/ | grep "menu"</code></pre>
            </div>

            <h3>Retour en dÃ©veloppement</h3>
            <p>Pour revenir en mode dÃ©veloppement aprÃ¨s avoir prÃ©parÃ© la production :</p>
            <div class="code-block">
                <pre><code># Relancer la configuration de dÃ©veloppement
./dev/setup.sh

# DÃ©marrer le serveur de dÃ©veloppement
./dev/start.sh</code></pre>
            </div>

            <div class="alert alert-info">
                <strong>ğŸ’¡ Workflow recommandÃ© :</strong> Gardez une branche ou un dossier sÃ©parÃ© pour la production, et un autre pour le dÃ©veloppement. Cela Ã©vite les allers-retours entre les configurations.
            </div>

            <h3>Maintenance et mises Ã  jour</h3>
            
            <h4>Mise Ã  jour du contenu</h4>
            <ol>
                <li>Modifier les fichiers en local</li>
                <li>Tester avec <code>./dev/start.sh</code></li>
                <li>PrÃ©parer pour la production avec <code>./dev/prod.sh</code></li>
                <li>DÃ©ployer les modifications</li>
            </ol>

            <h4>Sauvegarde</h4>
            <ul>
                <li>ğŸ“¦ <strong>Code source</strong> : SauvegardÃ© via Git</li>
                <li>ğŸ—ƒï¸ <strong>DonnÃ©es</strong> : Sauvegarder les fichiers gÃ©nÃ©rÃ©s (si applicable)</li>
                <li>âš™ï¸ <strong>Configuration</strong> : Sauvegarder les .htaccess personnalisÃ©s</li>
            </ul>

            <div class="alert alert-warning">
                <strong>âš ï¸ Important :</strong> Testez toujours vos modifications en local avant de dÃ©ployer en production. Le script prod.sh modifie les fichiers de maniÃ¨re irrÃ©versible (sauf si vous avez une sauvegarde Git).
            </div>
        </div>
    </main>

    <footer>
        <p>&copy; 2025 Sites Indignons-nous Bloquons tout - Documentation</p>
    </footer>

    <script src="theme.js"></script>
</body>
</html>