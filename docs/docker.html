<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Docker - Documentation</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <nav>
            <div class="logo">
                <img src="https://indignonsnous.fr/global/img/logo-inbt.svg" alt="Indignons-nous Bloquons tout" />
                <span>Dev Tools</span>
            </div>
            <ul class="nav-links">
                <li><a href="index.html">Accueil</a></li>
                <li><a href="installation.html">Installation</a></li>
                <li><a href="developpement.html">D√©veloppement</a></li>
                <li><a href="docker.html" class="active">Docker</a></li>
                <li><a href="production.html">Production</a></li>
                <li><button id="theme-toggle" class="theme-btn">‚òÄÔ∏è</button></li>
            </ul>
        </nav>
    </header>

    <main>
        <div class="content">
            <h1>Environnement Docker</h1>
            
            <p>L'environnement Docker offre une solution compl√®te avec Apache, live reload et BrowserSync pour un d√©veloppement avanc√©.</p>

            <h3>Pr√©requis</h3>
            <ul>
                <li><strong>Docker</strong> install√© sur votre syst√®me</li>
                <li><strong>Docker Compose</strong> install√©</li>
                <li><strong>Bash</strong> pour ex√©cuter les scripts</li>
            </ul>

            <h3>D√©marrage rapide</h3>
            <div class="code-block">
                <pre><code># Donner les permissions d'ex√©cution (si n√©cessaire)
chmod +x dev/docker.sh dev/docker-stop.sh

# D√©marrage complet de l'environnement
./dev/docker.sh

# Arr√™t de l'environnement
./dev/docker-stop.sh</code></pre>
            </div>

            <h3>Services disponibles</h3>
            <table>
                <thead>
                    <tr>
                        <th>Service</th>
                        <th>Port</th>
                        <th>URL</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Apache</td>
                        <td>8080</td>
                        <td><a href="http://localhost:8080" target="_blank">http://localhost:8080</a></td>
                        <td>Serveur web principal</td>
                    </tr>
                    <tr>
                        <td>Live Reload</td>
                        <td>3000</td>
                        <td><a href="http://localhost:3000" target="_blank">http://localhost:3000</a></td>
                        <td>Rechargement automatique</td>
                    </tr>
                    <tr>
                        <td>BrowserSync</td>
                        <td>3001</td>
                        <td><a href="http://localhost:3001" target="_blank">http://localhost:3001</a></td>
                        <td>Interface de synchronisation</td>
                    </tr>
                </tbody>
            </table>

            <h3>Avantages de l'environnement Docker</h3>
            <ul>
                <li>üê≥ <strong>Environnement isol√©</strong> : Pas de conflit avec votre syst√®me</li>
                <li>üîÑ <strong>Live reload</strong> : Rechargement automatique des pages</li>
                <li>üåê <strong>Apache r√©el</strong> : Environnement proche de la production</li>
                <li>üîß <strong>BrowserSync</strong> : Synchronisation multi-navigateurs</li>
                <li>üì± <strong>Test responsive</strong> : Test sur diff√©rents appareils</li>
            </ul>

            <h3>Configuration Docker</h3>
            
            <h4>Structure des fichiers Docker</h4>
            <div class="code-block">
                <pre><code>docker/
‚îú‚îÄ‚îÄ Dockerfile          # Image Apache personnalis√©e
‚îú‚îÄ‚îÄ compose.yaml        # Configuration des services
‚îî‚îÄ‚îÄ README.md          # Documentation Docker</code></pre>
            </div>

            <h4>Services configur√©s</h4>
            <p>L'environnement Docker comprend plusieurs services orchestr√©s :</p>
            
            <ul>
                <li><strong>Web (Apache)</strong> : Serveur principal avec support PHP et SSI</li>
                <li><strong>Live Reload</strong> : Surveillance des fichiers et rechargement automatique</li>
                <li><strong>BrowserSync</strong> : Synchronisation des navigateurs et outils de d√©veloppement</li>
            </ul>

            <h3>Utilisation avanc√©e</h3>
            
            <h4>Commandes Docker manuelles</h4>
            <div class="code-block">
                <pre><code># Construire et d√©marrer les services
docker-compose -f docker/compose.yaml up --build

# D√©marrer en arri√®re-plan
docker-compose -f docker/compose.yaml up -d

# Voir les logs
docker-compose -f docker/compose.yaml logs -f

# Arr√™ter les services
docker-compose -f docker/compose.yaml down</code></pre>
            </div>

            <h4>Acc√®s aux conteneurs</h4>
            <div class="code-block">
                <pre><code># Acc√©der au conteneur Apache
docker-compose -f docker/compose.yaml exec web bash

# Voir les processus en cours
docker-compose -f docker/compose.yaml ps

# Red√©marrer un service sp√©cifique
docker-compose -f docker/compose.yaml restart web</code></pre>
            </div>

            <h3>D√©veloppement avec Docker</h3>
            
            <h4>Workflow recommand√©</h4>
            <ol>
                <li>D√©marrer l'environnement : <code>./dev/docker.sh</code></li>
                <li>Ouvrir <a href="http://localhost:8080" target="_blank">http://localhost:8080</a> pour le site</li>
                <li>Ouvrir <a href="http://localhost:3001" target="_blank">http://localhost:3001</a> pour BrowserSync</li>
                <li>Modifier vos fichiers - les changements sont automatiquement d√©tect√©s</li>
                <li>Arr√™ter l'environnement : <code>./dev/docker-stop.sh</code></li>
            </ol>

            <h4>BrowserSync - Fonctionnalit√©s</h4>
            <ul>
                <li>üîÑ <strong>Rechargement automatique</strong> des pages</li>
                <li>üì± <strong>Test multi-appareils</strong> synchronis√©</li>
                <li>üéØ <strong>Injection CSS</strong> sans rechargement</li>
                <li>üìä <strong>Interface de contr√¥le</strong> sur le port 3001</li>
                <li>üîç <strong>Outils de d√©bogage</strong> int√©gr√©s</li>
            </ul>

            <h3>D√©pannage Docker</h3>
            
            <h4>Probl√®mes courants</h4>
            
            <div class="alert alert-warning">
                <strong>‚ö†Ô∏è Port d√©j√† utilis√© :</strong> Si un port est d√©j√† utilis√©, arr√™tez les autres services ou modifiez les ports dans <code>docker/compose.yaml</code>
            </div>

            <div class="code-block">
                <pre><code># V√©rifier les ports utilis√©s
netstat -tulpn | grep :8080
netstat -tulpn | grep :3000

# Forcer l'arr√™t de tous les conteneurs
docker stop $(docker ps -q)

# Nettoyer les ressources Docker
docker system prune -f</code></pre>
            </div>

            <h4>Reconstruction compl√®te</h4>
            <div class="code-block">
                <pre><code># Arr√™ter et supprimer tous les conteneurs
./dev/docker-stop.sh

# Reconstruire compl√®tement
docker-compose -f docker/compose.yaml build --no-cache

# Red√©marrer
./dev/docker.sh</code></pre>
            </div>

            <h3>Comparaison avec le serveur Python</h3>
            <table>
                <thead>
                    <tr>
                        <th>Aspect</th>
                        <th>Serveur Python</th>
                        <th>Docker</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Simplicit√©</td>
                        <td>‚úÖ Tr√®s simple</td>
                        <td>‚ö†Ô∏è Plus complexe</td>
                    </tr>
                    <tr>
                        <td>Performance</td>
                        <td>‚úÖ L√©ger</td>
                        <td>‚ö†Ô∏è Plus lourd</td>
                    </tr>
                    <tr>
                        <td>Fonctionnalit√©s</td>
                        <td>‚ö†Ô∏è Basiques</td>
                        <td>‚úÖ Avanc√©es</td>
                    </tr>
                    <tr>
                        <td>Environnement</td>
                        <td>‚ö†Ô∏è Syst√®me local</td>
                        <td>‚úÖ Isol√©</td>
                    </tr>
                    <tr>
                        <td>Live reload</td>
                        <td>‚ùå Manuel</td>
                        <td>‚úÖ Automatique</td>
                    </tr>
                </tbody>
            </table>

            <div class="alert alert-info">
                <strong>üí° Recommandation :</strong> Utilisez le serveur Python pour un d√©veloppement simple et rapide, Docker pour un environnement plus proche de la production avec des fonctionnalit√©s avanc√©es.
            </div>
        </div>
    </main>

    <footer>
        <p>&copy; 2025 Sites Indignons-nous Bloquons tout - Documentation</p>
    </footer>

    <script src="theme.js"></script>
</body>
</html>